<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>云计算架构设计总结 | 黑暗森林</title><meta name="author" content="BlackForest1990"><meta name="copyright" content="BlackForest1990"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="什么是云计算？美国国家标准与技术协会（NIST）对此有这样一个权威和经典的定义： “所谓云计算，就是这样一种模式，该模式允许用户通过无所不在的、便捷的、按需获得的网络接入到一个可动态配置的共享计算资源池（其中包括了网络设备、服务器、存储、应用以及业务），并且以最小的管理代价或者业务提供者交互复杂度即可实现这些可配置计算资源的快速发放与发布。” 云计算的核心可以用五大基本特征、三种服务模式以及四类部">
<meta property="og:type" content="article">
<meta property="og:title" content="云计算架构设计总结">
<meta property="og:url" content="https://blackforest1990.github.io/2024/01/18/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/index.html">
<meta property="og:site_name" content="黑暗森林">
<meta property="og:description" content="什么是云计算？美国国家标准与技术协会（NIST）对此有这样一个权威和经典的定义： “所谓云计算，就是这样一种模式，该模式允许用户通过无所不在的、便捷的、按需获得的网络接入到一个可动态配置的共享计算资源池（其中包括了网络设备、服务器、存储、应用以及业务），并且以最小的管理代价或者业务提供者交互复杂度即可实现这些可配置计算资源的快速发放与发布。” 云计算的核心可以用五大基本特征、三种服务模式以及四类部">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blackforest1990.github.io/image/blackforest.jpg">
<meta property="article:published_time" content="2024-01-18T02:35:45.000Z">
<meta property="article:modified_time" content="2024-02-28T05:27:24.843Z">
<meta property="article:author" content="BlackForest1990">
<meta property="article:tag" content="云计算">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blackforest1990.github.io/image/blackforest.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blackforest1990.github.io/2024/01/18/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '云计算架构设计总结',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-28 13:27:24'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="黑暗森林" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/image/blackforest.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="黑暗森林"><span class="site-name">黑暗森林</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">云计算架构设计总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-01-18T02:35:45.000Z" title="发表于 2024-01-18 10:35:45">2024-01-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-28T05:27:24.843Z" title="更新于 2024-02-28 13:27:24">2024-02-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/">经验总结</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="云计算架构设计总结"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>什么是云计算？美国国家标准与技术协会（NIST）对此有这样一个权威和经典的定义： “所谓云计算，就是这样一种模式，该模式允许用户通过无所不在的、便捷的、按需获得的网络接入到一个可动态配置的共享计算资源池（其中包括了网络设备、服务器、存储、应用以及业务），并且以最小的管理代价或者业务提供者交互复杂度即可实现这些可配置计算资源的快速发放与发布。”</p>
<p>云计算的核心可以用五大基本特征、三种服务模式以及四类部署模式来概括。五大基本特征是：<strong>按需获得的自助服务，广泛的网络接入、资源池化、快捷的弹性伸缩以及可计量的服务</strong>。三种服务模式为：云基础设施即服务（IaaS），云平台即服务（PaaS），以及云软件即服务（SaaS）。四类部署模式可以划分为：专有云（私有云）、行业云、公有云，以及混合云。</p>
<p>云计算把一个固定CAPEX投入的IT项目变成一个PAYU 的OPEX项目, 因为成本和方案的优势，云计算伴随着企业数字化转型，被越来越看重，如何去做企业云化的架构设计，被讨论的越来越频繁，架构不应该只是考虑技术上的可行性，同时要考虑能否快速迁移，能否进行人员培训提高企业的DevOps能力，能否随着数字化转型成功给企业带来正向收益，这些要素同样需要纳入架构的设计中。无论IT架构如何螺旋式演进，客户价值和驱动力都体现在：</p>
<ul>
<li>更低的TCO；</li>
<li>更高的业务部署与生命周期管理效率；</li>
<li>更优的业务性能与用户体验。</li>
</ul>
<h2 id="云计算的商业动力与技术趋势">云计算的商业动力与技术趋势</h2>
<h3 id="用户痛点">用户痛点</h3>
<p>在传统IT体系架构下，当前企业基础设施建设与运维所面临的核心痛点问题可以总结概括为如下几点。</p>
<p><strong>平均资源利用率及能耗效率低下</strong>：各个IT基础设施单部件的选型、数量以及不同部件的组网连接方案均取决于企业IT收集的各业务部门对于IT核心业务处理量需求的预测和规划。同时所有企业IT应用软件、数据库以及中间件软件均采用独占计算、存储和网络资源的烟囱式部署。软件应用与硬件唯一捆绑，不同应用之间无法动态、高效共享相同的计算与存储资源。加之按照摩尔定律不断翻番增长的CPU计算能力已大大超出应用软件对计算资源利用率的同步能力，导致企业IT的平均资源利用率始终处于低于20%的水平。</p>
<p><strong>新业务上线测试周期长，效率低下</strong>：企业任何一项新业务上线，从最基础的硬件平台开始，向上逐层延伸至操作系统、中间件、数据库、CRM/ERP/HRM/PDM/Email/UC等各类业务关键软件堆栈，均需要投入IT专业化团队，进行软件安装、调试、功能与性能验证测试、网络配置及修改调整，然后经过若干轮测试、故障及性能稳定性测试定位及重配置和调整之后，才能最终达到期望正式上线运行的成熟度水准。这个过程一般需要长达2至3个月的时间。</p>
<p><strong>资源储备及弹性伸缩能力不足，不具备应对企业IT突发业务高峰处理的能力</strong>：针对特定垂直行业短时间内突发性的高流量、高密度业务需求（比如节假日期间对视频网站的突发业务流程冲击），企业内部物理基础设施资源往往无法满足短时间内迅速获取所需资源的需求，以及处置业务高峰过后的资源闲置问题</p>
<p><strong>企业核心信息资产通过个人办公PC/便携外泄的安全风险</strong>：部分企业核心信息资产通过员工个人PC电脑或便携设备外泄给竞争对手，对企业竞争力和商业利益带来负面影响。过分严格的信息安全管控措施又导致了工作效率的下降，企业管理层及员工无法便捷地通过无所不在的网络访问企业防火墙内部的信息资产。</p>
<p><strong>中小型企业希望通过宽带网络管道，从运营商托管应用数据中心“按需获取”其所需的企业IT应用能力</strong>：数量众多的中小企业，缺少IT领域专业经验，甚至没有财力和精力建设和维持自己专属的IT部门以及IT基础设施平台，普遍希望可以直接从托管运营商那里获取支撑其日常业务运作所需的SaaS服务。</p>
<p>针对解决上述企业IT系统建设和维护过程中遇到的普遍痛点问题，迫切呼唤业界IT软硬件解决方案提供商借助云计算技术，打造TCO、性价比与效率最优的“IT基础设施私有云及公有云”，具体包括：</p>
<ul>
<li>面向大型企业和行业领域提供全自动化管理、一站式交付、支持与企业ITIL无缝集成融合、TCO最优化的端到端解决方案，实现企业传统IT基础设施及应用的改造、扩容和新建；</li>
<li>面向中小型企业，提供支持多租户安全隔离与动态发放、超大规模资源池调度管理、可最大限度发挥规模经济效益的公有云托管解决方案。</li>
</ul>
<h3 id="云计算的商业动力：企业ICT转型">云计算的商业动力：企业ICT转型</h3>
<h4 id="互联网企业的核心竞争力">互联网企业的核心竞争力</h4>
<p><strong>复杂盈利模式</strong></p>
<p>在盈利模式上，相比传统企业，互联网公司最终设计了更为复杂、先进的盈利模式，即我们通常所说的“羊毛出在狗身上，猪来买单”。相比传统企业，这种盈利模式的好处是，用户接受互联网公司的产品和服务几乎没有利益付出的负面障碍。而最终为互联网提供免费服务的付费者也认为其每笔付出均有所值（这些付费者可能包括风险投资商、在互联网上做广告的企业，或者在互联网平台进行产品销售省去了渠道成本的企业）。这种复杂盈利模式让互联网公司的用户数量可以呈爆发式的增长，从而形成对传统企业的一项巨大的竞争优势。<strong>如今互联网公司所设计的盈利模式更加复杂，已经不再是简单的羊、狗、猪这种三方的关系了，而是贯穿全产业链、全商业运作的一种生态模式</strong>。而传统企业如今还是以简单的商品买卖这种古老的交易模式为主。这种盈利模式的竞争力差异，可能会让传统企业最终落到“把自己卖了，还在替别人点钱”的尴尬境地。</p>
<p><strong>极低成本</strong></p>
<p>互联网公司的这种复杂盈利模式，必须在规模效应（需要时间培育）下才能获得回报，而放大规模，需要更高的经营成本。这就要求互联网公司，为了活到能够盈利，必须再绞尽脑汁考虑如何降低自身的运营成本。构成互联网公司的主要成本主要是经营互联网网站所需的IT设备成本、IT软件成本、机房租赁成本、网络成本、办公场地成本、人员成本、市场广告成本等。其中IT设备、软件机房、网络以及运维人力的成本是互联网公司的最大成本源。对此，互联网公司不能再购买昂贵的商业IT产品，如产自知名IT厂商的小型机、数据库、操作系统等。他们只能寻求最便宜的解决方案，<strong>那就是我们现在看到的x86硬件和几乎全部基于开源软件一起构建的云计算平台</strong>。这个云计算平台相比传统企业使用的小型机、商业数据库、高端存储、商业应用软件等方式，成本至少下降了80%以上。而通过云计算的自动化运营技术，其大幅降低了运维人力的需求，一个运维人员可以管理数千台乃至上万台的IT设备。同时，基于云计算平台，其对机房基础设施也进行了优化改造，降低机房的能耗，即电力成本与场地成本。在业务上层，互联网公司千方百计地推进业务流程自动化的工作，使得大量传统企业人工流程在互联网平台上实现全自动化的处理，大幅降低了业务处理成本。</p>
<p>而传统企业，在丰厚的业务利润的滋养下，以及IT部门所处的企业非核心地位下，根本没有动力和条件向互联网公司那样拼命地降低IT成本。在大企业病的氛围下，传统企业所谓的降低成本，往往仅仅是为了一个漂亮的财务报表。实现每年10%～20%的成本下降幅度，即可以完美地达成当年业绩。在这种冰火两重天的环境下，让互联网公司在10年左右的时间里，大幅度地拉开了与传统企业的成本领先优势。如今，在传统金融行业每发放一笔贷款的成本竟然是互联网金融企业的1000倍。</p>
<p><strong>极度的敏捷</strong></p>
<p>为了快速推出业务，互联网公司也是无所不用其极。<strong>相比传统企业，互联网公司从人员组织架构、企业文化、经营模式、IT基础设施平台等方面都做了大幅改进</strong>。在组织架构上，即使是大型互联网企业，也放弃了传统企业那种逐层审批、大小领导签字画押的环节。业务研发团队自行进行业务决策，缩短内部业务研发外的时间。在企业文化上，为了业务快速上线，没日没夜的工作变得稀松平常，上线后再休息。在经营模式上，也完全打破传统企业把产品完美化再推向市场的策略，而是让位于业务上线时间，互联网公司让业务先上线，通过上线后用户反馈，再继续不断优化产品（规避了传统企业普遍存在的那种闭门造车的模式）。为了加快业务研发进度，在IT基础设施平台方面，互联网公司必须考虑用一个自动化的工具平台，利用这个平台，可以在最短的时间，开发出业务应用，并可以灰度发布，上线后还可以不断地继续完善。这就是我们已经熟知的云计算PaaS平台。经过这种为了加快业务上线速度进行的企业工作流程、组织架构、企业文化、IT平台的重构，互联网企业实现了新业务从研发立项到上线周期不会超过2周，最短只需不到2天的敏捷度。</p>
<p><strong>大数据寡头</strong></p>
<p>至今，大型互联网公司拥有几千PB的数据已经稀松平常了，领先的互联网公司已经走向EB乃至ZB的数量级。而大型传统企业所拥有的数据量，也不过几PB到几十PB，拥有几百个PB数据的传统企业已经少之又少了。双方仅在数据量上就已经达到上百倍的差距。这还只是数据的数量，还不算质量，在数据质量方面，互联网公司对消费者（个人）信息的掌握更是拥有巨大的优势，大型互联网公司的用户数量都是以亿为单位。个人的几乎所有活动信息都会呈现在互联网之上，<strong>包括但不限于个人的姓名、电话、住址、社会家庭关系、活动轨迹、资金关系、资产数额、知识能力、个人喜好、照片、影像、银行账号、社会交流、商务交流等</strong>。除了个人信息，还有大量的企业信息，包括企业（特别是网上开店企业）的所有<strong>经营活动、资金活动、客户信息、市场状况、销售活动、广告活动</strong>等。当所有的个人信息和企业信息汇聚起来，又形成了整个经济数据。任何经济领域的风吹草动，都不会逃过互联网厂商大数据监测与分析系统的法眼，而且在信息获取时间方向上比传统企业或机构大幅领先（比如某互联网公司公布的大企业景气指数曲线与国家统计局的指数曲线基本相同，但发布时间却比统计局的提前了5个月以上）。<strong>互联网企业获取的精准经济数据又可以反过来进行各种金融与市场商业活动</strong>。除了数据质量，在大数据处理技术上，互联网厂商也走在了前列。当大部分传统企业还在靠人工进行市场、经营与投资活动的时候，互联网公司已经开始进入了机器智能主导下的信息收集、分析、决策、处理的时代。</p>
<h4 id="传统企业的ICT转型">传统企业的ICT转型</h4>
<p><strong>传统企业应先认清自己</strong></p>
<p><strong>对于传统企业而言，有个重要的疑问需要解决，那就是为何互联网等信息化平台会成为所有企业的业务核心</strong>，即提高IT部门的地位，解决这个疑问的最佳答案是德国提出并已经局部实现的工业4.0概念。在工业4.0的场景下，一个制造企业，从产品的需求提出，到产品设计、原型生产、小批量试制、中等规模试制、测试验证，到大规模生产、物流仓储，再到市场销售的全环节、全流程，全部通过IT系统与互联网体系主导完成。人力工作只是在当前计算机设备能力有限的设计阶段和流程的规范性方面进行有限干预而已。</p>
<p>再以政府运营为例，政府未来的运营路径又是如何呢？政府作为公益、监管、执法机构，最高效率的运作就是利用互联网信息化的技术手段，打通与国家公民中所有企业、个人信息连接的壁垒，<strong>构建一个密集网状的信息化公共治理平台</strong>。比如：企业与个人的纳税可以在公共交易平台的交易与支付瞬间同时完成，税率也可以实现高度的定制化、个性化，可以针对不同企业经营与家庭状况收取不同税负并可调节。在这个公共信息化平台之上，所有的企业销售的商品与服务全程可追溯。而（企业）公民双方争议的调解和裁决大部分也可以在公共信息平台上解决，如此样例还有很多。政府达到这样一个公共信息化平台的信息化治理高度，这种治理模式实际上在一些互联网平台上已经完全或部分成为了现实，只是治理方是互联网公司而非政府而已。</p>
<p><strong>评估自己的防护壁垒与环境允许的转型窗口期</strong></p>
<p>虽然互联网厂商在向各行各业快速渗透，<strong>但出于各行业独有的技术壁垒、监管资质壁垒、资源壁垒、垄断市场壁垒等限制</strong>，互联网厂商无法一下子在短时间内通吃一切，气愤之余，也因此给这些壁垒冠以“保护既得利益，阻碍改革深入发展”的帽子。无论如何，这些壁垒给各行业的传统企业一个难得的转型窗口期。不同行业的转型窗口期不尽相同，这跟互联网厂商的基础能力相关。当前阶段互联网公司的基础能力聚集在个人消费者与小企业及个人创业者层面。那么以个人和小企业为目标客户的传统企业，转型窗口期就更短。以大型企业或政府机构为目标客户的传统企业转型窗口期则相对较长。因为经济的运转最终要靠个人，所以任何传统企业都不会有太长的转型窗口期。按照IT更新换代的发展周期预计，短的窗口期也就3～5年，长的窗口期也难以超过10年。</p>
<h4 id="企业云计算的发展趋势">企业云计算的发展趋势</h4>
<p>里程碑：</p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>面向数据中心管理员的IT基础设施资源虚拟化阶段</td>
<td>该阶段的关键特征体现为通过计算<strong>虚拟化技术</strong>的引入，将企业IT应用与底层的基础设施彻底分离解耦，将多个企业IT应用实例及运行环境（客户机操作系统）复用在相同的物理服务器上，并通过虚拟化集群调度软件，将更多的IT应用复用在更少的服务器节点上，从而实现资源利用效率的提升。</td>
</tr>
<tr>
<td>面向基础设施云租户和云用户的资源服务化与管理自动化阶段</td>
<td>该阶段的关键特征体现为通过管理平面的基础设施标准化服务与资源调度自动化软件的引入，以及数据平面的软件定义存储和软件定义网络技术，面向内部和外部的租户，将原本需要通过数据中心管理员人工干预的基础设施资源复杂低效的申请、释放与配置过程，<strong>转变为在必要的限定条件下（比如资源配额、权限审批等）的一键式全自动化资源发放服务过程</strong>。面向云租户的基础设施资源服务供给，可以是虚拟机形式，可以是容器（轻量化虚拟机），也可以是物理机形式。该阶段的企业IT云化演进，暂时还不涉及基础设施层之上的企业IT应用与中间件、数据库软件架构的变化</td>
</tr>
<tr>
<td>面向企业IT应用开发者及管理维护者的企业应用架构的分布式微服务化和企业数据架构的互联网化重构及大数据智能化阶段</td>
<td>该阶段的关键特征体现为：企业IT自身的应用架构逐步从纵向扩展应用分层架构体系，走向（依托开源增强的、跨不同业务应用领域高度共享的）数据库、中间件平台服务层以及（功能更加轻量化解耦、数据与应用逻辑彻底分离的）<strong>分布式无状态化架构</strong>，从而使得企业IT在支撑企业业务敏捷化、智能化以及资源利用效率提升方面迈上一个新的高度和台阶，并为企业创新业务的快速迭代开发铺平了道路。</td>
</tr>
</tbody>
</table>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240202130355310.png" alt="image-20240202130355310" style="zoom:50%;">
<p>云计算各阶段间的主要差异：</p>
<ul>
<li><strong>从IT非关键应用走向电信网络应用和企业关键应用</strong></li>
</ul>
<p>在云计算的计算虚拟化技术发展初期阶段，Guest OS与Host OS之间的前后端I/O队列在I/O吞吐上的开销较大，而传统的结构化数据由于对I/O性能吞吐和时延要求很高，这两个原因导致很多事务关键型结构化数据在云化的初期阶段并未被纳入虚拟化改造的范畴，从而使得相关结构化数据的基础设施仍处于虚拟化乃至云计算资源池的管理范围之外。然而随着虚拟化XEN/KVM引擎在I/O性能上的不断优化提升（如采用SR-IOV直通、多队列优化技术），使得处于企业核心应用的ERP等关系型关键数据库迁移到虚拟化平台上实现部署和运行已不是问题</p>
<ul>
<li><strong>从计算虚拟化走向存储虚拟化和网络虚拟化</strong></li>
</ul>
<p>对于存储来说，由于最基本的硬盘（SATA/SAS）容量有限，而客户、租户对数据容量的需求越来越大，因此必须考虑对数据中心内跨越多个松耦合的分布式服务器单元内的存储资源（服务器内的存储资源、外置SAN/NAS在内的存储资源）进行“小聚大”的整合，组成存储资源池。这个存储资源池，可能是某一厂家提供的存储软硬件组成的同构资源池，也可以是被存储虚拟化层整合成为跨多厂家异构存储的统一资源池。<strong>各种存储资源池均能以统一的块存储、对象存储或者文件的数据面格式进行访问</strong>。</p>
<p>在多租户虚拟化的环境下，不同租户对于边缘的路由及网关设备的配置管理需求也存在极大的差异化，而物理路由器和防火墙自身的多实例能力也无法满足云环境下租户数量的要求，采用与租户数量等量的路由器与防火墙物理设备，成本上又无法被多数客户所接受。于是人们思考是否可能将网络自身的功能从专用封闭平台迁移到服务器通用x86平台上来。<strong>这样至少网络端节点的实例就可以由云操作系统来直接自动化地创建和销毁，并通过一次性建立起来的物理网络连接矩阵，进行任意两个网络端节点之间的虚拟通讯链路建立</strong>，以及必要的安全隔离保障，从而里程碑式地实现了业务驱动的网络自动化管理配置，大幅度降低数据中心网络管理的复杂度。</p>
<ul>
<li><strong>资源池从小规模的资源虚拟化整合走向更大规模的资源池构建，应用范围从企业内部走向多租户的基础设施服务乃至端到端IT服务</strong></li>
</ul>
<p>通过虚拟化整合之后的资源池的服务对象，不能再仅仅局限于数据中心管理员本身，而是需要扩展到每个云租户。因此云平台必须在基础设施资源运维监控管理Portal的基础上，进一步面向每个内部或者外部的云租户提供按需定制基础设施资源，订购与日常维护管理的Portal或者API界面，并将虚拟化或者物理的基础设施资源的增、删、改、查等权限按照分权分域的原则赋予每个云租户，<strong>每个云租户仅被授权访问其自己申请创建的计算、存储以及与相应资源附着绑定的OS和应用软件资源</strong>，最终使得这些云租户可以在无须购买任何硬件IT设备的前提下，实现按需快速资源获取，以及高度自动化部署的IT业务敏捷能力的支撑，从而将云资源池的规模经济效益，以及弹性按需的快速资源服务的价值充分发掘出来。</p>
<ul>
<li><strong>数据规模从小规模走向海量，数据形态从传统结构化走向非结构化和半结构化</strong></li>
</ul>
<p>对非结构化、半结构化大数据的处理而产生的数据计算和存储量的规模需求，已远远超出传统的Scale-Up硬件系统可以处理的，因此要求必须充分利用云计算提供的Scale-Out架构特征，按需获得大规模资源池来应对大数据的高效高容量分析处理的需求。企业内日常事务交易过程中积累的大数据或者从关联客户社交网络以及网站服务中抓取的大数据，其加工处理往往并不需要实时处理，也不需要系统处于持续化的工作态，<strong>因此共享的海量存储平台，以及批量并行计算资源的动态申请与释放能力，将成为未来企业以最高效的方式支撑大数据资源需求的解决方案选择</strong>。</p>
<ul>
<li><strong>企业和消费者应用的人机交互计算模式，也逐步从本地固定计算走向云端计算、移动智能终端及浸入式体验瘦终端接入的模式</strong></li>
</ul>
<p>为应对云接入管道上不同业务类型对业务体验的不同诉求，业界通用的远程桌面接入协议在满足本地计算体验方面已越来越无法满足当前人机交互模式发展所带来的挑战，需要重点聚焦解决面向IP多媒体音视频的端到端QoS/QoE优化，并针对不同业务类别加以动态识别并区别处理，使其满足如下场景需求。</p>
<ul>
<li><strong>云资源服务从单一虚拟化，走向异构兼容虚拟化、轻量级容器化以及裸金属物理机服务器</strong></li>
</ul>
<p>基于共享Linux内核，对应用实例的运行环境以容器为单位进行隔离部署，并将其配置信息与运行环境一同打包封装，并通过容器集群调度技术（如Kubernetes）实现高并发、分布式的多容器实例的快速秒级发放及大规模容动态编排和管理，从而将大规模软件部署与生命周期管理，以及软件DevOps敏捷快速迭代开发与上线效率提升到了一个新的高度。从长远趋势上来看，容器技术终将以其更为轻量化、敏捷化的优势取代虚拟化技术，<strong>但在短期内仍很难彻底解决跨租户的安全隔离和多容器共享主机超分配情况下的资源抢占保护问题</strong>，因此，容器仍将在可见的未来继续依赖跨虚拟机和物理机的隔离机制来实现不同租户之间的运行环境隔离与服务质量保障。</p>
<ul>
<li><strong>云平台和云管理软件从闭源、封闭走向开源、开放</strong></li>
</ul>
<p>随着XEN/KVM虚拟化开源，以及OpenStack、CloudStack、Eucalyptus等云操作系统OS开源软件系统的崛起和快速进步，开源力量迅速发展壮大起来，迎头赶上并逐步成长为可以左右行业发展格局的重要决定性力量。</p>
<h2 id="云计算的架构内涵与关键技术">云计算的架构内涵与关键技术</h2>
<h3 id="云计算总体架构">云计算总体架构</h3>
<p>企业数据中心IT架构正在面临一场前所未有的，以“基础设施软件定义与管理自动化”、“数据智能化与价值转换”以及“应用架构开源化及分布式无状态化”为特征的转化。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240202150654923.png" alt="image-20240202150654923" style="zoom:50%;">
<p><strong>基础设施资源层融合</strong></p>
<p>面向企业IT基础设施运维者的数据中心计算、存储、网络资源层，不再体现为彼此独立和割裂的服务器、网络、存储设备，以及小规模的虚拟化资源池，而是通过引入云操作系统，在数据中心将多个虚拟化集群资源池统一整合为规格更大的逻辑资源池，甚至进一步将地理上分散、但相互间通过MPLS/VPN专线或公网连接的多个数据中心以及多个异构云中的基础设施资源整合为<strong>统一的逻辑资源池</strong>，并对外抽象为标准化、面向外部租户（公有云）和内部租户（私有云）的基础设施服务，租户仅需制定其在软件定义的API参数中所需资源的数量、SLA/QoS及安全隔离需求，即可从底层基础设施服务中以全自动模式弹性、按需、敏捷地获取到上层应用所需的资源配备。</p>
<p><strong>数据层融合</strong></p>
<p>面向企业日常业务经营管理者的数据信息资产层，不再体现为散落在各个企业、消费者IT应用中，如多个看似关联不大的结构化事务处理记录（关系型数据库）数据孤岛，非结构化的文档、媒体以及日志数据信息片段，<strong>而是通过引入大数据引擎，将这些结构化与非结构化的信息进行统一汇总，汇聚存储和处理，基于多维度的挖掘分析与深度学习</strong>，从中迭代训练出对业务发展优化及客户满意度提升有关键价值的信息，从而将经营管理决策从纯粹依赖人员经验积累转变到更多依赖基于大数据信息内部蕴藏的智慧信息，来支撑更科学、更敏捷的商业决策。除大数据之外，数据层融合的另一个驱动力，<strong>来自于传统商业数据库在处理高并发在线处理及后分析处理扩展性方面所遭遇的不可逾越的架构与成本的瓶颈</strong>，从而驱动传统商业闭源数据库逐步被Scale Out架构的数据库分表分库及水平扩展的开源数据库所替代。</p>
<p><strong>应用平台层融合</strong></p>
<p>企业IT业务开发者和供应者的应用平台层开始积极探索<strong>基于云应用开发平台来实现跨应用领域基础公共开发平台与中间件能力去重整合</strong>，节省重复投入，同时通过在云开发平台中集成透明的开源中间件来替代封闭的商业中间件平台套件，<strong>特别通过引入面向云原生应用的容器化应用安装、监控、弹性伸缩及生命周期版本灰度升级管理的持续集成与部署流水线</strong>，来推动企业应用从面向高复杂度、厚重应用服务的瀑布式开发模式，逐步向基于分布式、轻量化微服务的敏捷迭代、持续集成的开发模式演进。</p>
<h4 id="云计算架构上下文">云计算架构上下文</h4>
<p>云计算架构应用上下文的相关角色包括：云租户/服务消费者、云应用开发者、云服务运营者/提供者、云设备提供者</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240221110623159.png" alt="image-20240221110623159" style="zoom:50%;">
<p>从上述云计算的基础上下文描述，我们不难看出云平台和云运营与运维管理系统是介于上层多租户的IT应用、传统数据中心管理软件，以及下层数据中心物理基础设施层之间的一层软件。其中云平台可进一步被分解为面向基础设施整合的云操作系统，面向数据整合的大数据引擎，以及面向应用中间件整合的应用开放平台。而云运营与运维管理系统在云计算引入的初期，与传统数据中心管理系统是并存关系，最终将逐步取代传统数据中心管理。</p>
<p><strong>云平台的南向接口IF4向下屏蔽底层千差万别的物理基础设施层硬件的厂家差异性</strong>。针对应用层软件以及管理软件所提出的基础设施资源、数据处理以及应用中间件服务诉求，云平台系统向上层多租户的云应用与传统数据中心管理软件屏蔽如何提供资源调度、数据分析处理，以及中间件实现的细节，并在北向接口IF1、IF2和IF3为上层软件及特定租户提供归一化、标准化的基础设施服务（IaaS）、数据处理及应用平台服务（PaaS）API服务接口。在云平台面向云运营与管理者（拥有全局云资源操作权限）的IF3接口，除了面向租户的基础设施资源生命周期管理API之外，还包括一些面向物理、虚拟设施资源及云服务软件日常OAM运行健康状态监控的操作运维管理API接口。</p>
<p><strong>其中IF1/IF2/IF3接口中关于云租户感知的云平台服务API的典型形态为Web RESTful接口</strong>。<strong>IF4接口则为业务应用执行平面的x86指令</strong>，以及基础设施硬件特有的、运行在物理主机特定类型OS中的管理Agent，或者基于SSL承载的OS命令行管理连接。<strong>IF3接口中的OAM API则往往采用传统IT和电信网管中被广泛采用的Web RESTful、SNMP、CORBA等接口</strong>。</p>
<h4 id="云计算的典型技术参考架构">云计算的典型技术参考架构</h4>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240221114001532.png" alt="image-20240221114001532" style="zoom:60%;">
<h5 id="物理资源层">物理资源层</h5>
<p>所有支撑IaaS层的IT基础设施硬件，其中包括服务器、存储（传统RAID架构垂直扩展的Scale Up存储和基于服务器的分布式水平扩展的Scale Out存储），以及数据中心交换机（柜顶、汇聚以及核心交换）、防火墙、VPN网关、路由器等网络安全设备。</p>
<h5 id="虚拟资源层">虚拟资源层</h5>
<p>（1）计算虚拟化</p>
<p>所有计算应用（含OS）并非直接承载在硬件平台上，而是在上层软件与裸机硬件之间插入了一层<strong>弹性计算资源管理及虚拟化软件</strong>：弹性计算资源管理软件对外负责提供弹性计算资源服务管理API，对内负责根据用户请求调度分配具体物理机资源；虚拟化软件（Hypervisor）对来自所有的x86指令进行截获，并在不为上层软件（含OS）所知的多道执行环境并行执行“仿真操作”，使得从每个上层软件实例的视角，仍然是在独占底层的CPU、内存以及I/O资源；而从虚拟化软件的视角，则是将裸机硬件在多个客户机（VM）之间进行时间和空间维度的穿插共享（时间片调度、页表划、I/O多队列模拟等）。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228103020859.png" alt="image-20240228103020859" style="zoom:50%;">
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228111210610.png" alt="image-20240228111210610" style="zoom:50%;">
<ul>
<li>
<p>虚拟化环境下更高的内存访问效率：应用感知的大内存业务映射技术，通过该技术，<strong>可有效提升从虚拟机线性逻辑地址到最终物理地址的映射效率</strong>。</p>
</li>
<li>
<p>虚拟化环境下更高的CPU指令执行效率：通过对机器码指令执行的流程进行优化扫描，通过将相邻执行代码段中的“特权”指令所触发的“VM_Exit”虚拟化仿真操作进行基于等效操作的“合并”，从容达到在短时间内被频繁反复地执行。由于每次VM_Exit上下文进入和退出的过程都需要涉及系统运行队列调度以及运行环境的保存和恢复，<strong>即将多次上下文切换合并为一次切换</strong>，从而达到提升运行效率的目的。</p>
</li>
<li>
<p>虚拟化环境下更高的I/O和网络包收发处理效率：由于多个虚拟机在一个物理机内需要共享相同的物理网卡进行网络包收发处理，为有效减少中断处理带来的开销，在网络及I/O发包过程中，<strong>通过将小尺寸分组包合并为更大尺寸的分组包</strong>，可以减少网络收发接受端的中断次数，从而达到提升虚拟机之间网络吞吐率的目的。</p>
</li>
<li>
<p>更高的RAS可靠性保障：针对云计算所面临的电信领域网络及业务云化的场景，<strong>由于硬件故障被虚拟化层屏蔽了，使得物理硬件的故障无法像在传统物理机运行环境那样直接被传送通知给上层业务软件</strong>，从而导致上层业务层无法对故障做出秒级以内的及时响应，比如业务层的倒换控制，从而降低了对整体可靠性水平。如何感知上层的业务要求，快速进行故障检测和故障恢复，保证业务不中断，这给计算虚拟化带来了新的挑战。</p>
</li>
<li>
<p><strong>单VM及多VM的弹性伸缩技术</strong>：单VM及多VM的弹性伸缩技术包括基本资源部件级别、虚拟机级别、云系统级别三个层次的伸缩技术。基本资源部件级别：精细化的Hypervisor资源调度，<strong>对指定虚拟机实例的CPU、内存及存储规格进行弹性伸缩</strong>，并可对伸缩上下限进行配额限制。虚拟机级别：<strong>指虚拟机集群的自动扩展与收缩</strong>，基于CloudWatch机制对集群资源忙闲程度的监控，对业务集群进行集群伸缩与扩展的Auto-Scaling控制。云系统级别：<strong>在内部私有云资源不足的情况下</strong>，自动向外部公有云或其他私有云（计算及存储资源池）“租借”及“释放”资源。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228113502756.png" alt="image-20240228113502756" style="zoom:50%;">
</li>
</ul>
<p>（2）存储虚拟化</p>
<p>通过对所有来自应用软件层的存储数据面的I/O读写操作指令进行“截获”，建立从业务应用视角覆盖不同厂家、不同版本的异构硬件资源的统一的API接口，进行统一的信息建模，使得上层应用软件可以采用规范一致的**、与底层具体硬件内部实现细节解耦的方式访问底层存储资源**。</p>
<p>通过“存储虚拟化”层内对多个对等的分布式资源节点的聚合，实现该资源的“小聚大”。比如，将多个存储/硬盘整合成为一个容量可无限扩展的超大（EB级规模）的共享存储资源池。由此可以看到，存储虚拟化相对计算虚拟化最大的差别在于：<strong>其主要定位是进行资源的“小聚大”，而非“大分小”</strong>。原因在于，存储资源的 “大分小”在单机存储以及SAN/NAS独立存储系统，乃至文件系统中通过LUN划分及卷配置<strong>已经天然实现了</strong>，然而随着企业IT与业务数据的爆炸式增长，需要实现高度扁平化、归一化和连续空间，跨越多个厂家服务器及存储设备的数据中心级统一存储，即“小聚大”。存储“小聚大”的整合正在日益凸显出其不可替代的关键价值。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228103737613.png" alt="image-20240228103737613" style="zoom:50%;">
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228111322535.png" alt="image-20240228111322535" style="zoom:50%;">
<ul>
<li>
<p><strong>高性能分布式存储引擎</strong>：伴随着云计算系统支撑的IT系统越来越大，覆盖范围从不同服务器存储节点，到分布在不同地理区域的数据中心，这就需要有一个分布式存储引擎。这个引擎，能满足高带宽、高I/O等各种场景要求，能很好地进行带宽的扩展。</p>
</li>
<li>
<p><strong>存储异构能力</strong>：如何利旧，将不同厂家原有的独立SAN、NAS设备组合成一个大的存储资源池，也是软件定义存储中需要解决的问题</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228112112188.png" alt="image-20240228112112188" style="zoom:50%;">
</li>
<li>
<p><strong>存储卸载</strong>：传统的企业存储系统，在采用各种各样的存储软件，这些软件存储操作对存储I/O和CPU资源均有较大消耗，会影响到用户业务性能的发挥。因此，如何将存储操作标准化，然后将存储操作利用某些标准的硬件动作去代替，这就是存储卸载。</p>
</li>
</ul>
<p>（3）网络虚拟化</p>
<p>Cloud OS管理的资源范畴扩展到了整个数据中心，甚至将跨越多个由<strong>广域网物理或者逻辑专线</strong>连接起来数据中心。在一个具备一定规模的数据中心内，甚至多个数据中心内，各计算、存储单元之间以完全点对点的方式进行松耦合的网络互联。云数据中心之上承载的业务种类众多，各业务类型对于不同计算单元（物理机、虚拟机）之间，计算单元与存储单元之间，乃至不同安全层次的计算单元与外部开放互联网网络和内部企业网络之间的安全隔离及防护机制要求动态实现不同云租户之间的安全隔离。云数据中心还要满足不同终端用户不同场景的业务组网要求以及他们的安全隔离要求。因此，<strong>云操作系统的复杂性将随着云租户及租户内物理机和虚拟机实例的数量增长呈现几何级数的增长</strong>，由业务应用驱动的数据中心网络虚拟化和自动化已变得势在必行和不可或缺。为了实现彻底与现有物理硬件网络解耦的网络虚拟化与自动化，唯一的途径与解决方案就是SDN（也即所谓软件定义的网络），<strong>即构建出一个与物理网络完全独立的叠加式逻辑网络</strong>，其主要部件以及相关技术包括以下几方面。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228113854595.png" alt="image-20240228113854595" style="zoom:50%;">
<p><strong>SDN控制器</strong>：这是软件定义网络的集中控制模块。负责云系统中网络资源的自动发现和池化、根据用户需求分配网络资源、控制云系统中网络资源的正常运行。</p>
<p><strong>虚拟交换机</strong>：根据SDN控制器，创建出的虚拟交换机实例。可以对这个虚拟交换机进行组网的设计、参数的设置，一如对物理交换机的使用。</p>
<p><strong>虚拟路由器</strong>：根据SDN控制器，创建出的虚拟路由器实例。可以对这个虚拟路由器进行组网的设计、参数的设置，一如对物理路由器的使用。</p>
<p><strong>虚拟业务网关</strong>：根据用户业务的申请，由SDN控制器创建出虚拟业务网关实例，提供虚拟防火墙的功能。可以对这个虚拟业务网关进行组网的设计、参数的设置，一如对物理业务网关的使用。</p>
<p><strong>虚拟网络建模</strong>：面对如此复杂多变的组网，如何保证网络的有效区分和管理，又能保证交换和路由的效率，一个有效的建模方法和评估模型是需要的。虚拟网络建模技术能提前预知一个虚拟网络的运行消耗、效率和安全性。虚拟网络建模可以做成一个独立功能库，在需要的时候启动，以减少对系统资源的占用。</p>
<h5 id="资源服务与调度层">资源服务与调度层</h5>
<p>相对虚拟化层在业务执行面和数据面上“资源聚合与分割仿真”，该层次主要体现为管理平面上的“逻辑资源调度”。</p>
<p>由于多个厂家已经投入到云计算的研发和实施中，不可避免地有多种实现方式。而要实现云计算真正的产业化并被广泛使用，<strong>各厂家的云计算平台必须要能够互相交互，即进行接口标准化</strong>。接口标准化后，主流的虚拟化平台，例如Hyper-V、KVM、UVP、ESX等之间能够互相兼容。各个硬件厂家或者中间件厂家可以自由选择虚拟化内核。</p>
<p>在云计算新的发展阶段中，面向公有云、面对国际化公司的分布式云系统将是重点。这样引发对超大资源的分配和调度。在整个云计算的实现架构上，计算、存储、网络资源的分配和使用将走向专业化。这是因为一个云应用业务，根据性质的不同，它对计算、存储、网络资源的需求可能是不一样的。例如：呼叫中心业务偏向于计算资源使用，而对于网盘业务则偏向于存储资源使用。在这种情况下，为了更有效地利用资源，<strong>给业务层提供基本资源调用API是最好的选择</strong>，将计算、存储、网络资源都作为基本资源单位，提供统一的资源调用接口，让云业务开发者自己选择如何高效地使用这些资源。这些API包括以下几个方面。</p>
<ul>
<li>弹性计算资源调用API：计算资源包括CPU和内存，云计算平台根据云运营商的要求，已经将CPU和内存虚拟化和池化。系统提供资源的动态申请、释放、故障检测、隔离和自动切换功能，做到业务不感知。CPU资源又可以分为纯计算型、图像处理型等不同类型。不管是CPU还是内存，<strong>都提供瘦分配功能</strong>，资源的自动伸缩保证在低业务量时减少资源的消耗，高业务量时开启所有物理资源，确认业务的高效运行。计算资源API还需要提供集群能力。</li>
<li>弹性存储资源调用API：存储资源API提供文件或者卷接口，除了提供常见的资源申请、释放、瘦分配等功能外，还涉及其他几个关键方面。
<ul>
<li>异构资源的池化：不同的厂家在将存储资源池化后，提供统一的API，一个厂家可以利用这些API，<strong>将不同厂家的存储资源池构成一个大的资源池</strong>，然后再封装出API供业务调用。</li>
<li>存储资源的分层分级存储：因业务性能要求的不同，分层存储是一个常用的技术，业务系统在申请存储资源的时候，可以选择是否使用这个特性。</li>
<li>内存存储资源的支持：<strong>未来的系统，内存一定会成为主存，所有的存储，除非一些特别重要的信息，基本上不再需要存入非易失性介质</strong>。而使用内存资源作为主存，可靠性是关键要求。在构造内存存储池的时候，可靠性必须贯彻始终，每个内存存储在其他地方有备份，或者确保内存存储有可靠的UPS保护。</li>
</ul>
</li>
<li>弹性网络资源调用API：网络资源API的基本功能也包括资源的申请、释放、监控、故障隔离和恢复等，也需要考虑异构资源的统一化。</li>
</ul>
<h4 id="拉通公有云与私有云的混合云架构">拉通公有云与私有云的混合云架构</h4>
<p>我们也不难发现，很多大企业及政府机构在面临云计算的建设使用模式的选择时，不可避免地将安全性问题放在了一个非常重要的位置上，甚至是作为首要考量的因素。目前，仅有在自建数据中心及自己维护管理组织的掌控范围内私有云模式才能保障企业敏感涉密的关键信息资产。这一事实决定了私有云仍将是很多大企业建设云计算首要选择的模式，私有云仍将与公有云在未来相当长一段时间内并存发展。只有拉通公有云和私有云的混合云能够将线上的公有云弹性敏捷优势，与私有云的安全私密保障优势相结合，实现优势互补，才能成为企业的最佳选择。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228110612475.png" alt="image-20240228110612475" style="zoom:50%;">
<p>然而，考虑到大企业、政府机构等的业务负载的多样性，需要向云端迁移的应用并不仅仅包含核心涉密的信息资产，也包括业务突发性强，资源消耗量大，并且具备资源使用完毕之后可以立即释放的特征，比如<strong>开发测试应用、大数据分析计算应用、电商渠道的分布式Web前端应用等</strong>，均属于此类应用负载。这些应用当然也更适合采用公有云的方式来承载。但对于同一企业租户来说，如果一部分应用负载部署在公有云端，另一部分应用负载部署在私有云端，则仅仅跨云的身份认证、鉴权、拉通的统一发放及API适配是不够的，更重要的是必须实现拉通公有云和私有云的安全可信网络，实现自动化建立网络连接。</p>
<p>为满足上述诉求，需要跨不同的公有云和私有云，<strong>构建一层统一的混合云编排调度及API开放层</strong>，实现跨不同异构云的统一信息模型，并通过适配层将不同异构私有云、公有云的云服务及API能力集，对齐到混合云的统一信息模型，并通过SDN与各公有云、私有云的网络控制功能相配合，最终完成跨异构云网络互联的自动化。当然这个统一编排调度引擎，以及API开放层的实现架构，存在不同的可选路径。</p>
<ul>
<li>
<p><strong>引入一个全新的编排调度层，逐一识别出跨不同异构云的公共服务能力</strong>，并以此公共能力及其信息建模为基础参照，进行到各公有云、私有云的计算，存储原生API能力的逐一适配。该路径下的跨云网络互联方案，需要混合云SDN与各公有云、私有云的VPN网络服务进行紧密协同配合，由于不同异构云之间的网络服务语义及兼容性相比计算和存储服务差别更大，因此也必然给跨云的VPN网络连接适配处理带来了更大的复杂度与挑战。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228111830184.png" style="zoom:50%;">
</li>
<li>
<p><strong>依托于业界开源事实标准的云服务与调度层（如OpenStack），作为拉通各异构公有云、私有云的信息模型及API能力的基准，通过社区力量推动各异构云主动提供与该事实标准兼容的适配驱动</strong>。该路径下的跨云网络互联，采用叠加在所有异构云虚拟化之上的Overlay虚拟网络机制，无须进行跨异构云的网络模型适配转换，即可面向租户实现按需的跨云网络互联，从而大大降低了跨云网络互联处理的难度，为混合云的广泛普及奠定了坚实的基础。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228111939903.png" alt="image-20240228111939903" style="zoom:50%;">
<h4 id="可靠性保障">可靠性保障</h4>
<h5 id="数据中心内的可靠性保障技术">数据中心内的可靠性保障技术</h5>
<p>数据中心内的可靠性保障技术主要包括HA（High Availability）冷备份、FT（Fault Tolerance）热备份、轻量级FT。</p>
<p><strong>HA（High Availability）</strong></p>
<p>冷备份数据中心内基于共享存储的冷迁移，在由于软件或硬件原因引发主用VM/PM故障的情况下，触发应用在备用服务器上启动。其适用于不要求业务零中断或无状态应用的可靠性保障。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228112518375.png" alt="image-20240228112518375" style="zoom:50%;">
<p><strong>FT（Fault Tolerance）</strong></p>
<p>热备份其指指令、内存、所有状态数据同步。该方式的优势是状态完全同步，完全保证一致性，且支持SMP。劣势是性能开销大，会带来40%左右的性能降低。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228112623769.png" alt="image-20240228112623769" style="zoom:50%;">
<p><strong>轻量级FT</strong></p>
<p>其是基于I/O同步的FT热备机制。优势是CPU/网络性能损耗10%以内，支持单核和多核。劣势是适合于网络I/O为主服务的场景。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228112902532.png" alt="image-20240228112902532" style="zoom:50%;">
<h5 id="跨数据中心的可靠性保障技术">跨数据中心的可靠性保障技术</h5>
<p>跨数据中心的可靠性保障技术，主要是基于存储虚拟化层I/O复制的同步和异步容灾两种。基于存储虚拟化层I/O复制的同步容灾，采用生产和容灾中心同城（＜100KM）部署，时延小于5ms,DC间带宽充裕，并且对RPO（恢复点目标）要求较高，一般RPO接近或者等于0秒。分布式块存储提供更高效的I/O同步复制效率。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228113118131.png" alt="image-20240228113118131" style="zoom:50%;">
<p>基于存储虚拟化层I/O复制的异步容灾采用生产和容灾中心异地（大于100KM）部署，带宽受限，时延大于5ms，同时对RPO有一定的容忍度，如RPO大于5分钟。I/O复制及快照对性能的影响趋近于零。</p>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228113203260.png" alt="image-20240228113203260" style="zoom:50%;">
<h3 id="云计算核心架构竞争力">云计算核心架构竞争力</h3>
<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228114520068.png" alt="image-20240228114520068" style="zoom:50%;">
</li>
</ul>
<h2 id="云计算及大数据开源软件概览">云计算及大数据开源软件概览</h2>
<table>
<thead>
<tr>
<th>项目</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenStack</td>
<td>云操作系统框架，基于这个框架，可以集成不同的各类组件，实现满足不同场景需要的云操作系统，并在此基础上，最终构建完整的云计算系统。在计算领域，可以插件化的形式接入KVM、Xen、vCenter、FusionCompute等不同的Hypervisor；在存储领域，可以以插件化的形式实现对不同厂商的存储设备，以及Ceph、FusionStorage、vSAN等不同的软件定义存储的管理；在网络领域，可以实现对不同的网络硬件设备，OVS、Liunx-bridge、HAProxy等开源网络组件，以及多种SDN控制器的接入。</td>
</tr>
<tr>
<td>Kubernetes /Mesos / Docker</td>
<td>Mesos生态：核心组件包括Mesos容器集群资源管理调度以及不同的应用管理框架。典型的应用管理框架包括Marathon和Chronos，其中Marathon用来管理长期运行服务，如Web服务；Chronos用来管理批量任务。Mesos生态主要由Mesosphere、Twitter等公司主力推动。                                                                                               Kubernetes生态：Google公司发起的社区项目，涵盖容器集群资源管理调度，以及不同类型应用的应用管理组件。例如副本可靠性管理，服务发现和负载均衡，灰度升级，配置管理等组件。                                                                               Docker生态：Docker公司希望向容器生态系统上层发展，推出了Swarm容器资源管理调度组件，以及Compose应用编排组件。</td>
</tr>
<tr>
<td>Hadoop/Spark</td>
<td>Hadoop来自Apache社区，是一个可水平扩展、高可用、容错的海量数据分布式处理框架，提供了简单分布式编程模型map-reduce。Hadoop设计的假设是底层硬件不可靠，由Hadoop检测和处理底层硬件失效<img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228130850558.png" alt="image-20240228130850558" style="zoom:50%;"><img src="https://raw.githubusercontent.com/BlackForest1990/Mypic/img/img/image-20240228130939484.png" style="zoom:50%;"></td>
</tr>
</tbody>
</table>
<p>本文对于云计算的架构设计做了初步总结，后面会细化各个技术和应用场景，分开描述。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blackforest1990.github.io">BlackForest1990</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blackforest1990.github.io/2024/01/18/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">https://blackforest1990.github.io/2024/01/18/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blackforest1990.github.io" target="_blank">黑暗森林</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a></div><div class="post_share"><div class="social-share" data-image="/image/blackforest.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>谢谢支持</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechatpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechatpay.jpg"/></a><div class="post-qr-code-desc"></div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/01/18/%E6%94%BF%E5%BA%9C%E7%9A%84%E7%94%9F%E6%84%8F%E6%80%8E%E4%B9%88%E5%81%9A/" title="政府的生意怎么做"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">政府的生意怎么做</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/16/Tcp-ip/" title="Tcp&amp;ip"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Tcp&amp;ip</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E7%9A%84%E5%95%86%E4%B8%9A%E5%8A%A8%E5%8A%9B%E4%B8%8E%E6%8A%80%E6%9C%AF%E8%B6%8B%E5%8A%BF"><span class="toc-number">1.</span> <span class="toc-text">云计算的商业动力与技术趋势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%97%9B%E7%82%B9"><span class="toc-number">1.1.</span> <span class="toc-text">用户痛点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E7%9A%84%E5%95%86%E4%B8%9A%E5%8A%A8%E5%8A%9B%EF%BC%9A%E4%BC%81%E4%B8%9AICT%E8%BD%AC%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">云计算的商业动力：企业ICT转型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E4%BC%81%E4%B8%9A%E7%9A%84%E6%A0%B8%E5%BF%83%E7%AB%9E%E4%BA%89%E5%8A%9B"><span class="toc-number">1.2.1.</span> <span class="toc-text">互联网企业的核心竞争力</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E4%BC%81%E4%B8%9A%E7%9A%84ICT%E8%BD%AC%E5%9E%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">传统企业的ICT转型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%81%E4%B8%9A%E4%BA%91%E8%AE%A1%E7%AE%97%E7%9A%84%E5%8F%91%E5%B1%95%E8%B6%8B%E5%8A%BF"><span class="toc-number">1.2.3.</span> <span class="toc-text">企业云计算的发展趋势</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E7%9A%84%E6%9E%B6%E6%9E%84%E5%86%85%E6%B6%B5%E4%B8%8E%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF"><span class="toc-number">2.</span> <span class="toc-text">云计算的架构内涵与关键技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">云计算总体架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-number">2.1.1.</span> <span class="toc-text">云计算架构上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E7%9A%84%E5%85%B8%E5%9E%8B%E6%8A%80%E6%9C%AF%E5%8F%82%E8%80%83%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.2.</span> <span class="toc-text">云计算的典型技术参考架构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E8%B5%84%E6%BA%90%E5%B1%82"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">物理资源层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E8%B5%84%E6%BA%90%E5%B1%82"><span class="toc-number">2.1.2.2.</span> <span class="toc-text">虚拟资源层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E4%B8%8E%E8%B0%83%E5%BA%A6%E5%B1%82"><span class="toc-number">2.1.2.3.</span> <span class="toc-text">资源服务与调度层</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%89%E9%80%9A%E5%85%AC%E6%9C%89%E4%BA%91%E4%B8%8E%E7%A7%81%E6%9C%89%E4%BA%91%E7%9A%84%E6%B7%B7%E5%90%88%E4%BA%91%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.3.</span> <span class="toc-text">拉通公有云与私有云的混合云架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%80%A7%E4%BF%9D%E9%9A%9C"><span class="toc-number">2.1.4.</span> <span class="toc-text">可靠性保障</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E5%86%85%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%E4%BF%9D%E9%9A%9C%E6%8A%80%E6%9C%AF"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">数据中心内的可靠性保障技术</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%A8%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%E4%BF%9D%E9%9A%9C%E6%8A%80%E6%9C%AF"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">跨数据中心的可靠性保障技术</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E6%A0%B8%E5%BF%83%E6%9E%B6%E6%9E%84%E7%AB%9E%E4%BA%89%E5%8A%9B"><span class="toc-number">2.2.</span> <span class="toc-text">云计算核心架构竞争力</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E8%AE%A1%E7%AE%97%E5%8F%8A%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6%E6%A6%82%E8%A7%88"><span class="toc-number">3.</span> <span class="toc-text">云计算及大数据开源软件概览</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By BlackForest1990</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">如果只允许一种声音存在，那么，唯一存在的那个声音就是谎言。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>